<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>书架 - 本地电子书阅读器</title>
  <script>
    (function() {
      try {
        var theme = localStorage.getItem('local_reader_theme');
        if (theme === 'light' || theme === 'dark') {
          document.documentElement.setAttribute('data-theme', theme);
        }
      } catch (error) {
        console.warn('Theme preload failed', error);
      }
    })();
  </script>
  
  <link rel="stylesheet" href="src/css/base.css">
  <link rel="stylesheet" href="src/css/responsive.css">
  <link rel="stylesheet" href="src/css/bookshelf.css">
</head>
<body data-theme="light">
  <div class="bookshelf-page">
    <header class="bookshelf-header">
      <div class="brand">
        <span class="brand-logo">📚</span>
        <div>
          <div class="brand-title">本地电子书阅读器</div>
          <div class="brand-subtitle">整洁·高效·沉浸式阅读体验</div>
        </div>
      </div>
      <div class="header-actions">
        <div class="search-group">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
          <input id="bookSearchInput" type="search" placeholder="搜索书名或路径..." autocomplete="off" />
        </div>
        <div class="sort-group">
          <label for="sortSelect">排序</label>
          <select id="sortSelect">
            <option value="recent">最近阅读</option>
            <option value="title">书名</option>
            <option value="added">添加时间</option>
          </select>
        </div>
        <button id="themeToggle" class="ghost-btn" type="button">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
          <span>夜间</span>
        </button>
        <button id="addBookBtn" class="primary-btn" type="button">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14"></path><path d="M5 12h14"></path></svg>
          <span>添加书籍</span>
        </button>
      </div>
    </header>

    <section class="bookshelf-summary" id="bookshelfSummary"></section>

    <main class="bookshelf-main">
      <div id="bookshelfGrid" class="bookshelf-grid" aria-live="polite"></div>
      <div id="bookshelfEmpty" class="bookshelf-empty" hidden>
        <div class="empty-icon">📥</div>
        <h2>书架空空如也</h2>
        <p>将 .epub、.txt 或 .pdf 文件拖拽到此处，或点击上方的“添加书籍”按钮。</p>
        <button id="emptyAddBtn" class="primary-btn" type="button">添加第一本书</button>
      </div>
    </main>

    <footer class="bookshelf-footer">
      <div>支持 EPUB / TXT / PDF · 数据保存在本地，放心使用</div>
      <div class="footer-links">
        <a href="reader.html">进入阅读页</a>
        <a href="user-data/" target="_blank" rel="noopener">查看配置文件</a>
      </div>
    </footer>
  </div>

  <input id="bookFileInput" type="file" accept=".epub,.txt,.pdf" multiple hidden />

  <template id="bookCardTemplate">
    <article class="book-card">
      <div class="book-cover">
        <img src="" alt="" loading="lazy" />
        <div class="cover-placeholder" aria-hidden="true"></div>
        <button class="delete-btn" type="button" title="删除书籍">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path><path d="M10 11v6"></path><path d="M14 11v6"></path><path d="M5 6l1-3h12l1 3"></path></svg>
        </button>
      </div>
      <div class="book-info">
        <div class="book-title"></div>
        <div class="book-meta"></div>
        <div class="book-tags"></div>
      </div>
    </article>
  </template>

  <div id="toast" class="toast" role="status" aria-live="polite" hidden></div>

  <script type="module" src="src/js/bookshelfApp.js"></script>
</body>
</html>
